Here's the entire documentation rewritten comprehensively and line-by-line into clear Markdown format, suitable for inclusion in your `README.md` file:

---

# CONNECT Iterative Data Analysis and Visualization Toolkit – User Guide

---

## Overview

This program is a complete toolkit for analyzing and visualizing training data generated by the CONNECT iterative process. It automatically loads data from a specified project folder (which contains iteration subdirectories), processes the data, and produces multiple types of outputs:

### 1. **Univariate Analysis:**
- Generates histograms, box plots, and summary statistics for likelihood values and Δχ² (delta chi-squared) values. (Only if enabled or the likelihood filter was used.)
- Uses the `Analyze_likelihoods` module.

### 2. **Iteration Plots:**
- Creates detailed two-panel scatter plots showing new points generated in each iteration (upper panel) and the cumulative training data up to that iteration (lower panel).
- Uses the `PlotIterations` module.

### 3. **Triangle (Corner) Plot:**
- Produces a pairplot (corner plot) of the final iteration’s snapshot, comparing accepted vs. discarded points across parameters.
- Uses the `TrianglePlot` module.

This guide explains how to run the program via the command line, the meaning and format of each option, and how to customize nearly every aspect of the analysis and visualization.

---

## Prerequisites and Installation

Before running, ensure the following Python libraries are installed:

- `numpy`
- `pandas`
- `scipy`
- `matplotlib`
- `seaborn`
- `tabulate`

Check installations via Unix shell:

```bash
pip show numpy pandas scipy matplotlib seaborn tabulate
```

Install missing packages with:

```bash
pip install numpy pandas scipy matplotlib seaborn tabulate
```

Verify LaTeX installation:

```bash
which latex
```

If missing, install [TeX Live](https://www.tug.org/texlive/) or another LaTeX distribution.

---

## Running the Program

Run the program via the command-line interface, specifying at least the `--project_path` argument. You may also set an output directory using `--output_path`. By default, outputs are saved in a subfolder named `iteration_analysis` within the project folder.

### Minimal Command Example

```bash
python plot_iterations.py --project_path "/path/to/connect/data/lcdm_example"
```

This command performs all analyses and plots with default options. Note that plotting all parameters in the triangle plot can be memory-intensive and might terminate on laptops.

### Full Command Example (Customized)

```bash
python plot_iterations.py --project_path "/path/to/connect/data/lcdm_example" \
    --output_path "/path/to/output" \
    --run_univariate_analysis "True" \
    --run_triangle_plot "True" \
    --run_plot_iterations "True" \
    --triangle_plot_cosmoparams "['H0', 'omega_b', 'tau_reio']" \
    --plot_iter_cosmoparams "[('H0', 'omega_b'), ('H0', 'tau_reio')]" \
    --latex_labels "{'H0': r'$H_0$', 'omega_b': r'$\Omega_b$', 'tau_reio': r'$\tau_{reio}$'}" \
    --dataloader_args "{'save_pickle_data': True, 'pickle_path': '/path/to/pickle_file'}" \
    --analyze_lkl_args "{'x_range': [0, 5000], 'y_range': [0, 500], 'include_inset': True, 'save_formats': ['png', 'pdf']}" \
    --plot_iter_args "{'x_range': [0, 100], 'y_range': [0, 100], 'combine_iteration_0_and_1': False, 'plot_contours': True, 'sigma': 15}" \
    --triangleplot_args "{'iterations_to_plot': [0, 1, 2, 3, 4, 5], 'colormap': 'tab10', 'plot_contours': True, 'sigma': 12}"
```

- All arguments except `--project_path` are optional.
- It's recommended to explicitly set the boolean flags (`run_univariate_analysis`, `run_triangle_plot`, `run_plot_iterations`) to control the analysis types.
- Specify `triangle_plot_cosmoparams` and `plot_iter_cosmoparams` to limit plotted parameters and avoid excessive memory usage.

This command runs a fully customized analysis and visualization pipeline.

---

## Full Program Workflow

1. **Data Loading:**
   - Scans the project folder for iteration subdirectories (e.g., `N-10000`, `number_1`, `number_2`, etc.).
   - Loads data (model parameters, likelihood data) into a structured dictionary under `"iteration_data"`.

2. **Univariate Analysis (`Analyze_likelihoods`):**
   - Performs statistical analysis on likelihood data if enabled.
   - Outputs histograms, box plots, and summary tables in CSV, LaTeX, and Markdown.

3. **Iteration Plotting (`PlotIterations`):**
   - Generates two-panel scatter plots for selected parameter pairs.
   - Shows iteration-specific and cumulative data with optional contour overlays and threshold lines.

4. **Triangle Plot (`TrianglePlot`):**
   - Creates corner plots displaying parameter relationships in the final data snapshot.
   - Includes optional Δχ² contours and threshold lines.

---

## Command-Line Options and Detailed Customization

All non-string arguments (lists, dictionaries, booleans) must be supplied as Python literal strings.

### Required Arguments

- `--project_path` (str): Path to CONNECT data folder.

### Reccomended Arguments

#### Analysis and Plotting Flags (bool)

- `--run_univariate_analysis`
- `--run_triangle_plot`
- `--run_plot_iterations`

#### Parameter Selection

- `--triangle_plot_cosmoparams` (list or "all")
- `--plot_iter_cosmoparams` (tuple/list of tuples)


### Optional Arguments

#### Output Control

- `--output_path`: Directory for generated outputs. *(Default: `<project_path>/iteration_analysis`)*

#### Verbosity

- `--verbose` (int, 0–5): Level of console output detail. *(Default: 1)*

#### Customization Dictionaries

- `--latex_labels`: Custom LaTeX-formatted labels.
- `--dataloader_args`: Data loading options.
- `--analyze_lkl_args`: Univariate analysis settings.
- `--plot_iter_args`: Iteration plot customizations.
- `--triangleplot_args`: Triangle plot customizations.

**Detailed customization options** for these dictionaries are fully described in the original documentation and should be referenced for specific needs.

---

## Using the CLI – Examples

1. **Basic Invocation**:
   ```bash
   python plot_iterations.py --project_path "/path/to/connect/data"
   ```

2. **Custom Output Location**:
   ```bash
   python plot_iterations.py --project_path "/data" --output_path "/output"
   ```

3. **Specific Analyses Only**:
   ```bash
   python plot_iterations.py --project_path "/data" --run_triangle_plot "False" --run_plot_iterations "False"
   ```

4. **Customized Parameter Selection**:
   ```bash
   python plot_iterations.py --project_path "/data" --triangle_plot_cosmoparams "['H0', 'omega_b']"
   ```

---

## Outputs

Generated files include:

- **Univariate Analysis**: Reports, plots, tables in `analysis_reports`.
- **Iteration Plots**: Two-panel scatter plots in `iteration_plots`.
- **Triangle Plots**: Corner plots in `triangle_plots`.

---

## Troubleshooting and Tips

- **Verbose Mode**: Adjust verbosity (`--verbose 3`) for detailed logging.
- **Data Issues**: Verify required data files in iteration folders.
- **Axis Ranges**: Customize manually if automatic scaling fails.
- **Contour Appearance**: Experiment with contour settings (`grid_size`, `sigma`) for better visualization.
- **Legend Customization**: Use `legend_labels` and `marker_styles` for clearer legends.

---

## Conclusion

This toolkit allows extensive customization, supporting comprehensive data analysis and visualization tailored to your CONNECT project's needs.

---

**Author**: [Nicklas Månsson]
